if(location.search!=="?foo"){location.search="?foo";throw new Error()}
var isOpen=!1;var user={};var savedBackground={};var _now=new Date();var today=_now.getDate();var myDataContainer=[];bootstrapApp();function bootstrapApp(){var savedUser;chrome.storage.sync.get(savedUser,function(foundUser){if(foundUser.name===undefined||''){$('body, .background').fadeIn(800);$('.logo, .date, footer, section.dashboard, section.googleSearch').css('display','none');$('section.welcomeMessage, .darkenBackground').css('display','flex');typedjs();return}
user=foundUser;checkIfMoodsShouldReset();renderDashboard();renderNormalTodo();return});var savedBackground;chrome.storage.local.get(savedBackground,function(foundBackground){savedBackground=foundBackground;if(foundBackground.dataURL===undefined||''){$('.spinnerContainer').css('display','flex');getBackgroundAPI();return}
base64ToImgAndDisplay();return})}
function User(name,email,gender){this.name=name;this.email=email;this.gender=gender;this.timezone=null;this.location=null;this.favoriteVideos=[];this.id=null;this.hideButton=!1;this.searchbar=!0;this.todolist=!0;this.todolistStyle='normal';this.currentMonth=new Date().getMonth();this.firstMeditation=!0;this.leaveTodolistOpen=!1;this.cleanMode=!1;this.leaveBackground=!1;this.todo={};this.background={backgroundChangeFrequency:3,hasChangedToday:{background1:!1,background2:!1,background3:!1,background4:!1,background5:!1,background6:!1,background7:!1,background8:!1,background9:!1,background10:!1,background11:!1,background12:!1,background13:!1,background14:!1},favoriteBackgrounds:[]}}
User.prototype.searchbarON=function(){this.searchbar=!0};User.prototype.searchbarOFF=function(){this.searchbar=!1};User.prototype.hasMeditated=function(){this.firstTimeMeditating=!1};let _name,_email,_gender,_timezone,_myLocation;function base64ToImgAndDisplay(){var savedBackground;chrome.storage.local.get(savedBackground,function(foundBackground){console.log('foundBackground',foundBackground);$('#background').on('load',function(){$('body, .background').fadeIn(350)}).attr('src',foundBackground.dataURL);if(foundBackground.location===undefined){$('#picLocation').html('Planet Earth');$('#picAuthor').html(`Photo: <a style="color: rgba(255, 255, 255, 0.8);" class="myAnchor" href="${foundBackground.user.links.html}?utm_source=moodflow&utm_medium=referral&utm_campaign=api-credit">${foundBackground.user.name}</a> / <a class="myAnchor" style="color: rgba(255, 255, 255, 0.8);" href="https://unsplash.com/">Unsplash</a>`)}else{$('#picLocation').html(foundBackground.location.title);$('#picAuthor').html(`Photo: <a class="myAnchor" style="color: rgba(255, 255, 255, 0.8);" href="${foundBackground.user.links.html}?utm_source=moodflow&utm_medium=referral&utm_campaign=api-credit">${foundBackground.user.name}</a> / <a style="color: rgba(255, 255, 255, 0.8);" class="myAnchor" href="https://unsplash.com/">Unsplash</a>`)}})}
function getBackgroundAPI(frequencyEmitter){console.log('getBackgroundAPI + frequencyEmitter',frequencyEmitter);$.ajax({url:"https://api.unsplash.com/photos/random",type:'get',async:!0,dataType:"json",data:"client_id=29b43b6caaf7bde2a85ef2cfddfeaf1c1e920133c058394a7f8dad675b99921b&collections=281002",success:(response)=>{console.log('AJAX Response: ',response);if(frequencyEmitter===1){$('#source_img').on('load',function(){console.log('Image has loaded!');compressImageAndSave(1)}).attr('src',response.urls.raw);let backgroundInfo=response;chrome.storage.local.set(backgroundInfo,()=>{console.log('backgroundInfo saved');return});return}
$('#source_img').on('load',function(){console.log('Image has loaded!');compressImageAndSave()}).attr('src',response.urls.raw);let backgroundInfo=response;chrome.storage.local.set(backgroundInfo,()=>{console.log('backgroundInfo saved');return});if(response.location===undefined){$('#picLocation').html('Planet Earth');$('#picAuthor').html(`Photo: <a style="color: rgba(255, 255, 255, 0.8);" class="myAnchor" href="${response.user.links.html}?utm_source=moodflow&utm_medium=referral&utm_campaign=api-credit">${response.user.name}</a> / <a class="myAnchor" style="color: rgba(255, 255, 255, 0.8);" href="https://unsplash.com/">Unsplash</a>`)}else{$('#picLocation').html(response.location.title);$('#picAuthor').html(`Photo: <a class="myAnchor" style="color: rgba(255, 255, 255, 0.8);" href="${response.user.links.html}?utm_source=moodflow&utm_medium=referral&utm_campaign=api-credit">${response.user.name}</a> / <a style="color: rgba(255, 255, 255, 0.8);" class="myAnchor" href="https://unsplash.com/">Unsplash</a>`)}},error:()=>{console.log('getPictureApi AJAX failed')}})}
function compressImageAndSave(frequencyEmitter){let source_img=document.getElementById("source_img");let compressedSRC;let quality=30;let output_format='jpg';compressedSRC=jic.compress(source_img,quality,output_format).src;if(frequencyEmitter===1){savedBackground.dataURL=compressedSRC;chrome.storage.local.set(savedBackground,function(){console.log('dataURL was saved')});return}
if(savedBackground.dataURL===undefined){$('#background').on('load',function(){$('.spinnerContainer').fadeOut(2000)}).attr('src',compressedSRC)}
savedBackground.dataURL=compressedSRC;chrome.storage.local.set(savedBackground,()=>{console.log('dataURL was saved');return})}
function startMeditation(){function welcomeMessage(){ion.sound.play("relaxing");$("#welcomeMessage").typed({strings:[`Welcome, ${user.name}.`,"Since this is your first time here...^1000<br> I hereby welcome you warmly^1000 to the meditation center.",`Now, ${user.name}...^1000 Meditation can be a very powerful tool^1000 if used right.<br>^1000 It has been proven to be as effective as medication in the treatment of depression and bipolarity.`,`And if you thankfully do not suffer from those diseases,^1000<br> it channels your thoughts towards the potential that lies^500 within you.`,`Meditation helps you reflect on the problems that you are currently facing in your life^1000<br>and makes it easier for you to find the solutions.`,"Together we can realize your full potential^1000<br>and gain control of your inner emotional well-being.","Moreover, if you find inner peace^1000<br>it will positively reflect onto other aspects of your life.","Relax^1000, focus on your breathing^1000<br>and firstly try to think about the things you are gratefull in this life.<br>^1000",`Now... ^2000 Try syncing your breathing with the glow of the circle.<br>^1000 Let us start.^1000`],typeSpeed:10,startDelay:2000,backDelay:2000,fadeOut:!0,fadeOutClass:'typed-fade-out',fadeOutSpeed:1000,showCursor:!0,cursorChar:"",callback:()=>{let update={firstMeditation:!1};chrome.storage.sync.set(update,function(){console.log('user was updated')});$('#welcomeMessage').fadeOut(500);$('.center').css('animation-play-state','paused');$('.center').css('animation-name','breathIn');$('.center').css('animation-play-state','running');let animationEvent=whichAnimationEvent();$('.center').one(animationEvent,function(event){$('.wellDone, .meditateIconContainer').fadeIn(2000)})}})}
function alreadyMeditated(){ion.sound.play("relaxing");$("#hasMeditated").typed({strings:[`Welcome back, ${user.name}.`,`When meditating, try syncing your breathing with the glow of the circle.^1000`,`Also, try and make and effort to focus^1000<br> on the things that you are gratefull for.^1000`,`Let us start.^2000`],typeSpeed:10,startDelay:2000,backDelay:2000,fadeOut:!0,fadeOutClass:'typed-fade-out',fadeOutSpeed:1000,showCursor:!0,cursorChar:"",callback:()=>{$('#hasMeditated').fadeOut(500);$('.center').css('animation-play-state','paused');$('.center').css('animation-name','breathIn');$('.center').css('animation-play-state','running');let animationEvent=whichAnimationEvent();$('.center').one(animationEvent,function(event){$('.wellDone, .meditateIconContainer').fadeIn(2000)})}})}
$('section.meditate').css('display','flex');$('.warning').fadeIn(500);setTimeout(()=>{$('.warning').fadeOut(500,()=>{setTimeout(()=>{$('.sponsor').fadeIn(500,()=>{setTimeout(()=>{$('.sponsor').fadeOut(500)},4000)})},1000)})},4000);setTimeout(()=>{$('.meditateContainer, .iconContainer, .iconContainerLeft').fadeIn(500,()=>{$('.center').css({'animation-name':'smallBreathIn','animation-play-state':'running'})});$('.meditateContainer').css('display','flex');if(user.firstMeditation){welcomeMessage()}else if(!user.firstMeditation){alreadyMeditated()}},100)}
function typedjs(){$(".typed").typed({strings:['this will take less than a minute...','i promise!','you know we are...^1000 arranging stuff','very very complex stuff^1000','you see how the color of the letters is changing?','cool stuff... ^1000 right? :)','i am so excited that i will get to know you in a few...','for real i dont tell this to everybody','just to you...^1000 i am such a romantic ','almost finished loading!^1000 count to 10 and we will be done','anytime now','so close!^1000 ...for real now','internet these days...','and we are readyyy!'],typeSpeed:20,startDelay:3000,backDelay:2000,fadeOut:!0,fadeOutClass:'typed-fade-out',fadeOutSpeed:2000,showCursor:!0,cursorChar:"|",callback:()=>{}})}
function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)}
function whichTransitionEvent(){var t,el=document.createElement("fakeelement");var transitions={"transition":"transitionend","OTransition":"oTransitionEnd","MozTransition":"transitionend","WebkitTransition":"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t]}}}
function whichAnimationEvent(){var t,el=document.createElement("fakeelement");var animations={"animation":"animationend","OAnimation":"oAnimationEnd","MozAnimation":"animationend","WebkitAnimation":"webkitAnimationEnd"};for(t in animations){if(el.style[t]!==undefined){return animations[t]}}}
function checkEmailLength(){var input=$('.emailInput').val();if(input.length>=16){$('.emailInput').css('font-size','32px')}
if(input.length>=20){console.log('longer then 20');$('.emailInput').css('font-size','27px');return}}
function formatDataForChart(){for(var key in user){if(user.hasOwnProperty(key)){key=key*1;if(isNaN(key)===!1){if(user[key].moodValue!==''){moodValue=user[key].moodValue*1;let newObj={x:key,y:moodValue};myDataContainer.push(newObj)}}}}
console.log('myDataContainer',myDataContainer);updateChart(myDataContainer)}
function updateChart(array){var currentIndex;let ctx=document.getElementById("myChart");let daysInCurrentMonth=new Date(_now.getFullYear(),_now.getMonth()+1,0).getDate();let myChart=new Chart(ctx,{type:'line',data:{datasets:[{data:array,backgroundColor:'rgba(247,218,13, 0.5)',borderColor:'gold',pointRadius:6,pointHoverRadius:10,pointBackgroundColor:'rgba(255,255,255,1)',pointBorderColor:'#fff',pointHoverBackgroundColor:'rgba(0,0,0,1)',pointHoverBorderColor:'black'}]},options:{maintainAspectRatio:!1,responsive:!0,animation:{duration:400,easing:'easeOutQuart'},tooltips:{enabled:!0,backgroundColor:'rgba(0,0,0,0)',bodyFontSize:14,titleFontSize:14,footerFontSize:12,callbacks:{title:(tooltipItem,data)=>{let now=new Date();let myArray=["January","February","March","April","May","June","July","August","September","October","November","December"];let currentMonth=now.getMonth();setTimeout(()=>{$('#displayTooltipTitle').html(myArray[currentMonth]+', '+tooltipItem[0].xLabel)},250)},beforeLabel:(tooltipItems,data)=>{$('.yourMoodflow').addClass('makeSpanTransparent');$('div.headerContainer, footer').fadeOut(500);$('div.tooltipContainer').fadeIn(1000);let displayComment=$('#displayTooltipComment');let newIndex=tooltipItems.xLabel;if(newIndex!==currentIndex){console.log('changed node');$('#displayTooltipTitle, #displayTooltipComment, .moodHighlight, #displayTooltipMoodvalue').css({'color':'transparent','text-shadow':'0 0 5px rgba(255,255,255,0.1)'});let comment=user[tooltipItems.xLabel.toString()].moodComment;comment=comment.substr(0,1).toUpperCase()+comment.substr(1);setTimeout(()=>{displayComment.html(comment)},250);setTimeout(()=>{$('#displayTooltipTitle, #displayTooltipComment, #displayTooltipMoodvalue').css({'color':'white','text-shadow':'none'});$('.moodHighlight').css({'color':'gold','text-shadow':'none'})},500);currentIndex=tooltipItems.xLabel}},label:(tooltipItems,data)=>{setTimeout(()=>{$('.moodHighlight').html(tooltipItems.yLabel)},250)}}},legend:{display:!1,labels:{fontColor:'white'}},scales:{xAxes:[{gridLines:{color:"rgba(255,255,255,0.0)",zeroLineColor:"rgba(255,255,255,0.05)"},ticks:{fontColor:"white",beginAtZero:!1,min:1,max:daysInCurrentMonth,fixedStepSize:1},type:'linear',position:'bottom'}],yAxes:[{gridLines:{color:"rgba(255,255,255,0.0)",zeroLineColor:"rgba(255,255,255,0.5)"},ticks:{fontColor:"rgba(200, 200, 200, 0.25)",beginAtZero:!0,max:10,fixedStepSize:1},type:'linear',}],}}})}
function saveTodo(input){if(user.todo[1]===undefined){console.log('this is the first todo eva');user.todo[1]=input;chrome.storage.sync.set(user,function(){console.log('saved a new todo');console.log('user withing saveTodo()',user)});return 1}
for(var todoKey in user.todo){}
todoKey=todoKey*1;let keyToBeSaved=todoKey+1;user.todo[keyToBeSaved]=input;chrome.storage.sync.set(user,function(){console.log('saved a new todo')});return keyToBeSaved}
function renderNormalTodo(){if(user.leaveTodolistOpen){$('section.todoList').css('display','block');isOpen=!0}
if($.isEmptyObject(user.todo)){console.log('obejct is empty');if($('#todoInput').length){console.log('bruh there is one there already');return}
let myTodoTemplate=`
            <div class="oneTodoTemplate attached">
                <textarea id="todoInput" name="name" placeholder="what shall be done?" rows="1" cols="80"></textarea>
            </div> `;$('.todosContainer').append(myTodoTemplate);$('.attached').css('display','block');return}
for(let key in user.todo){let keyAsANumber=key*1;let myTodo=`
            <div class="oneTodo" id="${keyAsANumber}">
                <div class="todoText">${user.todo[key]}</div>
                <span class="eraseTodo">
                    <i class="icon ion-ios-close-outline"></i>
                </span>
            </div>`;$('.todosContainer').append(myTodo)}}
function checkIfMoodsShouldReset(){let currentMonth=new Date();currentMonth=currentMonth.getMonth();let usersMonth=user.currentMonth;if(currentMonth===usersMonth){console.log('no changes to be done');return}
console.log('time to reset');for(var key in user){if(user.hasOwnProperty(key)){key=key*1;if(isNaN(key)===!1){let stringKey=key.toString();delete user[stringKey]}}}
let moodContainer={1:{moodComment:"",moodValue:""},2:{moodComment:"",moodValue:""},3:{moodComment:"",moodValue:""},4:{moodComment:"",moodValue:""},5:{moodComment:"",moodValue:""},6:{moodComment:"",moodValue:""},7:{moodComment:"",moodValue:""},8:{moodComment:"",moodValue:""},9:{moodComment:"",moodValue:""},10:{moodComment:"",moodValue:""},11:{moodComment:"",moodValue:""},12:{moodComment:"",moodValue:""},13:{moodComment:"",moodValue:""},14:{moodComment:"",moodValue:""},15:{moodComment:"",moodValue:""},16:{moodComment:"",moodValue:""},17:{moodComment:"",moodValue:""},18:{moodComment:"",moodValue:""},19:{moodComment:"",moodValue:""},20:{moodComment:"",moodValue:""},21:{moodComment:"",moodValue:""},22:{moodComment:"",moodValue:""},23:{moodComment:"",moodValue:""},24:{moodComment:"",moodValue:""},25:{moodComment:"",moodValue:""},26:{moodComment:"",moodValue:""},27:{moodComment:"",moodValue:""},28:{moodComment:"",moodValue:""},29:{moodComment:"",moodValue:""},30:{moodComment:"",moodValue:""},31:{moodComment:"",moodValue:""},};chrome.storage.sync.set(moodContainer,function(){chrome.storage.sync.get(savedUser,function(foundUser){console.log(foundUser);user=foundUser;formatDataForChart()})})}
function renderDashboard(emitter){chrome.storage.sync.get(user,function(foundUser){var skip;user=foundUser;$('.greeting').html(`Good day, ${user.name}.`);let todayAsAString=today.toString();if(user[todayAsAString]===undefined){console.log('undefined')}else if(user[todayAsAString].moodValue===''||undefined){console.log('user[todayAsAString] in hereeee!!!');$('section.moodInput').css('display','block');$('section.dashboard').css('display','none');skip=!0}
let frequencyNumber=user.background.backgroundChangeFrequency;if(emitter===1){$('.googleSearch').fadeIn(2000);$('#frequencyNumber').html('every 8 hours');$('#reflectButton').css('display','none');isOpen=!1;return}
if(user.searchbar===!0){$('.googleSearch').css('display','block');$('input.searchbar').attr('checked',!0)}else if(user.searchbar===!1){$('.googleSearch').css('display','none');$('input.searchbar').attr('checked',!1)}
if(user.todolist===!0){$('section.todoListButton').css('display','block');$('input.todolist').attr('checked',!0)}else if(user.todolist===!1){$('section.todoListButton').css('display','none');$('input.todolist').attr('checked',!1)}
if(user.cleanMode===!0){$('section.dashboard').css('display','none');$('section.landscapeButtons').css('display','flex');$('input.cleanMode').attr('checked',!0)}else if(user.cleanMode===!1){$('input.cleanMode').attr('checked',!1);$('section.dashboard').css('display','block');if(skip===!0){$('section.dashboard').css('display','none')}}
if(user.leaveBackground===!0){$('#leaveBackgroundOn').attr('checked',!0);$('.backgroundFrequencyContainer').css({'text-decoration':'line-through','color':'rgba(197,197,197,0.5)','pointer-events':'none'})}else if(user.searchbar===!1){$('#leaveBackgroundOn').attr('checked',!1)}
switch(frequencyNumber){case 1:$('#frequencyNumber').html('once a day');break;case 3:$('#frequencyNumber').html('every 8 hours');break;case 5:$('#frequencyNumber').html('every 5 hours');break;case 8:$('#frequencyNumber').html('every 3 hours');break;case 12:$('#frequencyNumber').html('every 2 hours');break;case 24:$('#frequencyNumber').html('every hour');break;case 48:$('#frequencyNumber').html('every 30 minutes');break;case 96:$('#frequencyNumber').html('every 15 minutes');break;default:}
$('.moodInputGreeting').html(`Good day, ${user.name}.`);formatDataForChart()})}
function injectYTVideo(){let online=window.navigator.onLine;var videos=['https://www.youtube.com/embed/SuPLxQD4akQ?autoplay=1','https://www.youtube.com/embed/26U_seo0a1g?autoplay=1','https://www.youtube.com/embed/Yb-OYmHVchQ?autoplay=1','https://www.youtube.com/embed/K2bw52VjJLM?autoplay=1','https://www.youtube.com/embed/eRaTpTVTENU?autoplay=1','https://www.youtube.com/embed/2_fDhqRk_Ro?autoplay=1','https://www.youtube.com/embed/DvtxOzO6OAE?autoplay=1','https://www.youtube.com/embed/D_Vg4uyYwEk?autoplay=1','https://www.youtube.com/embed/KHaooRlwtzI?autoplay=1','https://www.youtube.com/embed/lY7Mf6PzZyA?autoplay=1','https://www.youtube.com/embed/zCyB2DQFdA0?autoplay=1','https://www.youtube.com/embed/z1PSbDmV8Gw?autoplay=1','https://www.youtube.com/embed/H1sXTmaqRHU?autoplay=1'];if(online){$('.myQuote').fadeIn(2000);setTimeout(()=>{$('.myQuote').fadeOut(500)},7000);let oneVid=videos[Math.floor(Math.random()*videos.length)];$('.myiframe').attr("src",oneVid)}else{$('.notOnline').html(`${user.name}, it appears that you are currently not online.<br>Check your internet connection and try again.`).fadeIn(500).css('display','flex');setTimeout(()=>{$('.notOnline, .closeiframe, .myiframe').fadeOut(500);$('.headerContainer, footer').fadeIn(500)},4000)}}
$(document).ready(()=>{console.log('document is ready and isOpen:',isOpen);$('#placeholder').on('click',()=>{$('.ion-ios-search-strong').css('transform','translateX(300px)');setTimeout(()=>{if($("#placeholder").is(":focus")){$('#placeholder').attr("placeholder","Google search")}},850)});$('#placeholder').focusout(()=>{$('.ion-ios-search-strong').css('transform','translateX(0)');$('#placeholder').attr("placeholder","");setTimeout(()=>{$('#placeholder').attr("placeholder","")},100);setTimeout(()=>{$('#placeholder').attr("placeholder","");$('#placeholder').val('');$('.ion-ios-search-strong').fadeIn(300)},310)});let day=moment().format('dddd');let monthDaynum=moment().format('MMMM Do');$('.date').html(`${day}, ${monthDaynum}`);$('#motivateButton, #motivateButton2').on('click',()=>{$('.headerContainer, footer').fadeOut(500);$('section.todoList').fadeOut(500);injectYTVideo();$('.myiframe, .closeiframe').fadeIn(400)});$('.closeiframe').on('click',()=>{$('.closeiframe, .myiframe').fadeOut(800,()=>{$('.myiframe').attr('src','');$('.headerContainer, footer').fadeIn(500);if(isOpen){$('section.todoList').fadeIn(600)}})});$('#reflectButton, #reflectButton2').on('click',()=>{$('section.todoList').fadeOut(500);$('.tooltipContainer').css('display','none');$('.dashboard').fadeOut(500,()=>{$('.chart').fadeIn(500)})});$('#meditateButton, #meditateButton2').on('click',()=>{$('.transitionContainer').css('display','block');$('.eyeClosing').css('box-shadow','inset 0vw 0vw 0vw 0vw transparent');ion.sound({sounds:[{name:"relaxing",volume:1,preload:!0}],volume:0.7,path:"./sounds/",preload:!0});setTimeout(()=>{let myTransitionEvent=whichTransitionEvent();$('.eyeClosing').css('box-shadow','inset 0vw 0vw 4vw 100vw black');$('.eyeClosing').one(myTransitionEvent,function(event){startMeditation();$('.transitionContainer').css('display','none');$('.eyeClosing').css('box-shadow','inset 0vw 0vw 0vw 0vw transparent');return})},50)});$('#logoutFadeIn').on('click',()=>{$('section.todoList').fadeOut(100);$('.logoutpopup').fadeIn(300);$('.logoutpopup').mouseleave(()=>{$('.logoutpopup').fadeOut(300);if(isOpen){$('section.todoList').fadeIn(300)}})});$('.darkenBackground, #firstTimeClose').on('click',()=>{$('.darkenBackground, .welcomeMessage').fadeOut(500,()=>{$('section.loginForm').fadeIn(500)})});$('.control_indicator').on('click',function(){$(this).css('background-color','#ffd700');$('.control-checkbox .control_indicator:after').css('display','block')});$('.welcomeForm').submit((e)=>{e.preventDefault()});$('.usernameInput').keypress((e)=>{let input=$('.usernameInput').val();if(e.which==13&&input!==''){_name=$('.usernameInput').val();nameGreeting=_name.toLowerCase();$('.askEmail').html(`oh hey, ${nameGreeting}. <br> what is your <span class="highlight">email</span>?`);_name=_name.charAt(0).toUpperCase()+_name.slice(1);$('.usernameInput').css({'color':'transparent','border-bottom-color':'white'});$('.askName, .usernameInput').fadeOut(500,()=>{$('.askEmail, .emailInput').fadeIn(500);setTimeout(()=>{$('.noEmail').fadeIn(500)},1000)})}});$('.emailInput').on('keyup',()=>{checkEmailLength()});$('.emailInput').focus(function(){let input=$(this).val();setInterval(()=>{checkEmailLength()},500)});$('.emailInput').keypress((e)=>{let input=$('.emailInput').val();if(e.which==13&&input!==''){let validatedEmail=validateEmail(input);if(validatedEmail===!1){let animationEvent=whichAnimationEvent();$("input.emailInput").addClass("animated shake");$("input.emailInput").one(animationEvent,function(event){$("input.emailInput").removeClass("animated shake");return})}else if(validatedEmail===!0){_email=$('.emailInput').val();$('.askGender').html(`last question, ${nameGreeting}. <br> are you a <span class="highlight">guy</span> or a <span class="highlight">girl</span>?`);$('.emailInput').css({'color':'transparent','border-bottom-color':'transparent'}).val('');$('.askEmail, .emailInput, .noEmail').fadeOut(500,()=>{$('.askGender, .control_indicator').fadeIn(500,()=>{$('.control_indicator').css('animation-play-state','running');setTimeout(()=>{$('.noGender').fadeIn(500)},1500)})});return}}else if(e.which==13&&input===''){let animationEvent=whichAnimationEvent();$("input.emailInput").addClass("animated shake");$("input.emailInput").one(animationEvent,function(event){$("input.emailInput").removeClass("animated shake");return})}});$('.noEmail').on('click',()=>{_email=null;$('.askGender').html(`last question, ${nameGreeting}. <br> are you a <span class="highlight">guy</span> or a <span class="highlight">girl</span>?`);$('.askEmail, .emailInput, .noEmail').fadeOut(500,()=>{$('.askGender, .control_indicator').fadeIn(500,()=>{$('.control_indicator').css('animation-play-state','running')});setTimeout(()=>{$('.noGender').fadeIn(500)},1500)})});$('.noGender').on('click',()=>{_gender=null});$('.guycheckbox').on('click',()=>{_gender='male'});$('.girlcheckbox').on('click',()=>{_gender='female'});$('.afterGender').on('click',()=>{var savedUser=new User(_name,_email,_gender);var moodContainer={1:{moodComment:"",moodValue:""},2:{moodComment:"",moodValue:""},3:{moodComment:"",moodValue:""},4:{moodComment:"",moodValue:""},5:{moodComment:"",moodValue:""},6:{moodComment:"",moodValue:""},7:{moodComment:"",moodValue:""},8:{moodComment:"",moodValue:""},9:{moodComment:"",moodValue:""},10:{moodComment:"",moodValue:""},11:{moodComment:"",moodValue:""},12:{moodComment:"",moodValue:""},13:{moodComment:"",moodValue:""},14:{moodComment:"",moodValue:""},15:{moodComment:"",moodValue:""},16:{moodComment:"",moodValue:""},17:{moodComment:"",moodValue:""},18:{moodComment:"",moodValue:""},19:{moodComment:"",moodValue:""},20:{moodComment:"",moodValue:""},21:{moodComment:"",moodValue:""},22:{moodComment:"",moodValue:""},23:{moodComment:"",moodValue:""},24:{moodComment:"",moodValue:""},25:{moodComment:"",moodValue:""},26:{moodComment:"",moodValue:""},27:{moodComment:"",moodValue:""},28:{moodComment:"",moodValue:""},29:{moodComment:"",moodValue:""},30:{moodComment:"",moodValue:""},31:{moodComment:"",moodValue:""},};chrome.storage.sync.set(savedUser,function(){console.log('user was saved');chrome.storage.sync.set(moodContainer,function(){console.log('moodContainer was saved');chrome.alarms.create('backgroundCheck',{delayInMinutes:480,periodInMinutes:480});chrome.storage.sync.get(savedUser,function(foundUser){console.log(foundUser);user=foundUser;console.log(user);renderDashboard(1);$('section.loginForm').fadeOut(500,()=>{$('footer, .googleSearch, .date, .logo, section.dashboard').fadeIn(2000)});return})})})});let currentDay;let mood;let comment;$('#moodValue').mousemove(function(){$('.showInputValue').text($('#moodValue').val());setTimeout(()=>{$('.continueButton').fadeIn(400)},200)});$('.continueButton').on('click',function(){currentDay=_now.getDate();mood=$('#moodValue').val();user[currentDay].moodValue=mood;$('div.moodValueContainer').fadeOut(500,()=>{$('div.commentValueContainer').fadeIn(500)})});$('.commentInput').focus(function(){$(this).css('width','350px');$('.skipButton').css('left','140px');setTimeout(()=>{$('.submitButton').fadeIn(500)},300)});$('.commentInput').on('keyup',()=>{let text=$('.commentInput').val();if(text.length>=28){$('.commentInput').css('height','68px')}
if(text.length>=70){$('.commentInput').css('height','102px')}
if(text.length>=100){$('.commentInput').css('height','140px');return}});$('.submitButton').on('click',function(){comment=$('.commentInput').val();user[currentDay].moodComment=comment});$('.skipButton').on('click',function(){user[currentDay].moodComment=''});$('.statsFadeIn').on('click',function(){chrome.storage.sync.set(user,function(){chrome.storage.sync.get(user,function(foundUser){user=foundUser;console.log('new user',user);formatDataForChart();$('section.moodInput').fadeOut(500,()=>{$('section.chart').fadeIn(500)})})})});$('.iconContainer').on('click',function(){$('section.chart').fadeOut(500,()=>{$('.yourMoodflow').removeClass('makeSpanTransparent');console.log('user.cleanMode',user.cleanMode);if(user.cleanMode===!1){$('section.dashboard').fadeIn(500)}
$('div.headerContainer, footer').fadeIn(500);if(isOpen){$('section.todoList').fadeIn(300)}
renderDashboard()})});$('input.searchbar').on('click',function(){let checked=$(this).prop('checked');if(checked===!0){$('section.googleSearch').fadeIn(500);chrome.storage.sync.set({"searchbar":!0},function(){console.log('searchbar to true')})}else if(checked===!1){$('section.googleSearch').fadeOut(500);chrome.storage.sync.set({"searchbar":!1},function(){console.log('searchbar to false')})}});$('input.todolist').on('click',function(){let checked=$(this).prop('checked');console.log('checked',checked);if(checked===!0){$('section.todoListButton').fadeIn(500);isOpen=!1;chrome.storage.sync.set({"todolist":!0},function(){console.log('todolist to true')})}else if(checked===!1){$('section.todoListButton, section.todoList').fadeOut(500);isOpen=!1;chrome.storage.sync.set({"todolist":!1,"leaveTodolistOpen":!1},function(){console.log('searchbar to false')})}});$('input#superCleanMode').on('click',function(){let checked=$(this).prop('checked');if(checked===!0){$('section.dashboard').fadeOut(500);$('section.landscapeButtons').fadeIn(500).css('display','flex');chrome.storage.sync.set({"cleanMode":!0},function(){console.log('cleanMode to true')})}else if(checked===!1){$('section.dashboard').fadeIn(500);$('section.landscapeButtons').fadeOut(500);chrome.storage.sync.set({"cleanMode":!1},function(){console.log('cleanMode to false')})}});$('#moreBackground').on('click',function(){let frequency=$('#frequencyNumber').html();switch(frequency){case 'once a day':user.background.backgroundChangeFrequency=3;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 8 hours')});break;case 'every 8 hours':user.background.backgroundChangeFrequency=5;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 5 hours')});break;case 'every 5 hours':user.background.backgroundChangeFrequency=8;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 3 hours')});break;case 'every 3 hours':user.background.backgroundChangeFrequency=12;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 2 hours')});break;case 'every 2 hours':user.background.backgroundChangeFrequency=24;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every hour')});break;case 'every hour':user.background.backgroundChangeFrequency=48;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 30 minutes')});break;case 'every 30 minutes':user.background.backgroundChangeFrequency=96;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 15 minutes')});break;case 'every 15 minutes':user.background.backgroundChangeFrequency=96;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 15 minutes')});break;default:}});$('#lessBackground').on('click',function(){let frequency=$('#frequencyNumber').html();switch(frequency){case 'once a day':user.background.backgroundChangeFrequency=1;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('once a day')});break;case 'every 8 hours':user.background.backgroundChangeFrequency=1;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('once a day')});break;case 'every 5 hours':user.background.backgroundChangeFrequency=3;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 8 hours')});break;case 'every 3 hours':user.background.backgroundChangeFrequency=5;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 5 hours')});break;case 'every 2 hours':user.background.backgroundChangeFrequency=8;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 3 hours')});break;case 'every hour':user.background.backgroundChangeFrequency=12;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 2 hours')});break;case 'every 30 minutes':user.background.backgroundChangeFrequency=24;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every hour')});break;case 'every 15 minutes':user.background.backgroundChangeFrequency=48;chrome.storage.sync.set(user,function(){$('#frequencyNumber').html('every 30 minutes')});break;default:}});$('.logoutContainer').on('click',function(){if(confirm('All your data will be lost. Are you sure?')){chrome.storage.local.clear(function(){chrome.storage.sync.clear(function(){$('section.dashboard').fadeOut(500,()=>{chrome.runtime.reload()})})})}});$('#leaveBackgroundOn').on('click',function(){if(user.leaveBackground){let update={leaveBackground:!1};chrome.storage.sync.set(update,function(){console.log('now false');$('.backgroundFrequencyContainer').css({'text-decoration':'none','color':'white','pointer-events':'auto'});chrome.storage.sync.get(user,function(foundUser){user=foundUser})})}else if(!user.leaveBackground){let update2={leaveBackground:!0};chrome.storage.sync.set(update2,function(){console.log('now true');$('.backgroundFrequencyContainer').css({'text-decoration':'line-through','color':'rgba(197,197,197,0.5)','pointer-events':'none'});chrome.storage.sync.get(user,function(foundUser){user=foundUser})})}});$('#openTodolist').on('click',()=>{$('.logoutpopup').fadeOut(300);console.log('isOpen on click:',isOpen);if(isOpen===undefined){console.log('isOpen was undeinfed, now in that if statement');isOpen=!1;$('section.todoList').fadeIn(100);if($('#todoInput').length){console.log('bruh there is one there already');return}
let myTodoTemplate=`
                <div class="oneTodoTemplate attached">
                    <textarea id="todoInput" name="name" placeholder="what shall be done?" rows="1" cols="80"></textarea>
                </div> `;$('.todosContainer').append(myTodoTemplate);$('.attached').fadeIn(400,()=>{$('#todoInput').focus()});return}
if(isOpen===!1){console.log('now openinig');$('section.todoList').fadeIn(100);$('#todoInput').focus();update={leaveTodolistOpen:!0};chrome.storage.sync.set(update,function(){console.log('successful update');isOpen=!0})}else if(isOpen===!0){console.log('now closing');$('section.todoList').fadeOut(100);update={leaveTodolistOpen:!1};chrome.storage.sync.set(update,function(){console.log('successful update');isOpen=!1})}});$('.todosContainer').on('keydown','#todoInput',function(e){let unformattedInput=$(this).val();let input=unformattedInput.charAt(0).toUpperCase()+unformattedInput.slice(1);if(e.which===13&&input!==''){event.preventDefault();let todoID=saveTodo(input);console.log('todoID',todoID);let myTodo=`
                <div class="oneTodo" id="${todoID}">
                    <div class="todoText"></div>
                    <span class="eraseTodo">
                        <i class="icon ion-ios-close-outline"></i>
                    </span>
                </div>`;$('.todosContainer').append(myTodo);$(`#${todoID} > .todoText`).html(input);$('#todoInput').val('');$('.oneTodoTemplate').remove()}});$('.todosContainer').on('mouseenter','.oneTodo',function(){$(this).find('.eraseTodo').fadeIn(200)});$('.todosContainer').on('mouseleave','.oneTodo',function(){$(this).find('.eraseTodo').fadeOut(200)});$('.todosContainer').on('click','.ion-ios-close-outline',function(){let idToRemove=$(this).closest('.oneTodo').attr('id');console.log('user before getting into chrome.storage',user);chrome.storage.sync.get(user,(foundUser)=>{user=foundUser;delete user.todo[idToRemove];if($.isEmptyObject(user.todo)&&!$('#todoInput').length){console.log('obejct is empty');let myTodoTemplate=`
                    <div class="oneTodoTemplate attached">
                        <textarea id="todoInput" name="name" placeholder="what shall be done?" rows="1" cols="80"></textarea>
                    </div> `;$('.todosContainer').append(myTodoTemplate);$('.attached').fadeIn(400,function(){$(this).find(">:first-child").focus()})}
chrome.storage.sync.set(user,()=>{$(this).closest('.oneTodo').fadeOut(400).remove()})})});$('.anothaOne').on('click',function(){if($('#todoInput').length){console.log('bruh there is one there already');return}
let myTodoTemplate=`
            <div class="oneTodoTemplate attached">
                <textarea id="todoInput" name="name" placeholder="what shall be done?" rows="1" cols="80"></textarea>
            </div> `;$('.todosContainer').append(myTodoTemplate);$('.attached').fadeIn(200,()=>{$('#todoInput').focus()})});$('#closeMeditation, .meditateIconContainer').on('click',function(){ion.sound.stop("relaxing");$('section.meditate').fadeOut(500,()=>{$('section.meditate, .meditateContainer, .info').css('display','none')});renderDashboard()});$('#volumeOff').on('click',function(){ion.sound.stop("relaxing");$(this).fadeOut(500)})})
